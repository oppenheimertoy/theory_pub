
### 1. Дайте определение состояния объекта инварианта класса. Напишите пример класса с контролем инварианта на С++.

Из лекций:

Инвариант класса - это условие или набор условий, которые остаются истинными на протяжении всего жизненного цикла объекта класса. Это означает, что после того, как объект создан, его инварианты всегда остаются истинными, независимо от того, какие операции с ним выполняются. Поддержание инвариантов класса помогает обеспечить корректность и надежность работы программы.

Пример класса с контролем инварианта на С++:

```cpp
#include <stdexcept>

class BankAccount {
private:
    int balance; // Инвариант: баланс не должен быть отрицательным

public:
    BankAccount(int initialBalance) : balance(initialBalance) {
        if (initialBalance < 0) {
            throw std::invalid_argument("Initial balance cannot be negative");
        }
    }

    void deposit(int amount) {
        if (amount < 0) {
            throw std::invalid_argument("Deposit amount cannot be negative");
        }
        balance += amount;
    }

    void withdraw(int amount) {
        if (amount < 0) {
            throw std::invalid_argument("Withdrawal amount cannot be negative");
        }
        if (balance - amount < 0) {
            throw std::invalid_argument("Insufficient funds for withdrawal");
        }
        balance -= amount;
    }

    int getBalance() const {
        return balance;
    }
};
```

### 2. Дайте определение нарушения инварианта класса. Напишите пример класса с контролем инварианта на С++.

Из лекций:

Нарушение инварианта класса происходит, когда состояние объекта класса становится недействительным или несоответствующим определенным условиям инвариантов, которые должны оставаться истинными на протяжении всего жизненного цикла объекта. Такие нарушения могут привести к нестабильности программы и ошибкам.

Пример класса с контролем инварианта на С++:

```cpp
#include <stdexcept>
#include <vector>

class LimitedList {
private:
    std::vector<int> elements;
    size_t limit; // Инвариант: количество элементов не должно превышать limit

public:
    LimitedList(size_t limit) : limit(limit) {}

    void add(int element) {
        if (elements.size() >= limit) {
            throw std::length_error("Cannot add more elements, limit reached");
        }
        elements.push_back(element);
    }

    size_t size() const {
        return elements.size();
    }
};
```

В этом примере, инвариант класса `LimitedList` заключается в ограничении количества элементов. Метод `add` защищает этот инвариант, выбрасывая исключение, если добавление элемента приведет к превышению установленного лимита.

### 3. Дайте определение неизменяемого класса. Назовите плюсы и минусы такого класса. Напишите пример на С++.

Из лекций:

Неизменяемый класс (immutable class) - это такой класс, экземпляры которого не могут быть изменены после их создания. Все поля такого класса являются константными, и класс предоставляет только методы для чтения, но не для изменения своего состояния.

Плюсы:
- Потокобезопасность: экземпляры могут безопасно использоваться в многопоточных средах.
- Предсказуемость поведения: состояние объекта всегда ясно и неизменно.
- Упрощение кода: отсутствие необходимости защиты от изменений состояния.

Минусы:
- Ограниченная гибкость: объект не может быть изменен после создания.
- Потенциально большее использование памяти: может потребоваться создание новых объектов вместо изменения существующих.

Пример на С++:

```cpp
class ImmutablePoint {
private:
    const int x;
    const int y;

public:
    ImmutablePoint(int x, int y) : x(x), y(y) {}

    int getX() const {
        return x;
    }

    int getY() const {
        return y;
    }
};
```

В этом примере `ImmutablePoint` является неизменяемым классом, так как его состояние (координаты x и y) устанавливается при создании и не может быть изменено в дальнейшем.
